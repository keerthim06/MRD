<div ng-controller="groupCtrl as vm" ng-init="vm.edit();">
    <div class="wrapper wrapper-content animated fadeInRight">

        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>{{ 'CREATEGROUP' | translate }}</h5>
                <div settings="vm.createIconSetting" listclick="vm.listClick()"
                     printclick="vm.printClick('edit');" class="heading-icon" ibox-tools></div>
            </div>
        </div>
        <form name="myForm">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <span us-spinner="{radius:15, width:4, length: 8}"></span>
                    <div class="ibox float-e-margins">
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-sm-2">
                                    <div class="form-group control-spacing">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="col-sm-8">
                                    <div class="form-group control-spacing" ng-class="{'has-error': myForm.groupName.$invalid && !myForm.groupName.$pristine}">
                                        <label>{{ 'GROUPNAME' | translate }}<span class="require"> *</span></label>
                                        <input ng-disabled="vm.isView" name="groupName" type="text" class="form-control" placeholder="Enter group name" ng-model="vm.Group.GroupName" id="GroupName" maxlength="70" ng-pattern="/[a-zA-Z]+/" />
                                        <i class="require" ng-show="myForm.groupName.$invalid && !myForm.groupName.$pristine">Please enter valid input</i>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group control-spacing">
                                        <label>Group Type</label>
                                        <select class="form-control" ng-model="vm.Group.Type">
                                            <option value="1">Primary</option>
                                            <option value="0">Other</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-primary">
                                <div class="panel-heading">{{ 'ADDGRPMEMBER' | translate }}:</div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group control-spacing">
                                            <label>{{ 'CONTACTS' | translate }}: </label><br />
                                            <input type="text" autocomplete="off" ng-disabled="vm.isView" class="form-control" ng-model="vm.memberDetail" placeholder="Enter member name" typeahead="all as all.ContactName for all in vm.getContacts($viewValue) | filter:$viewValue" maxlength="100">
                                            <br />
                                            <input type="button" class="btn btn-rounded btn-primary" ng-click="vm.addContacts()" value="Add contact">
                                        </div>
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="form-group control-spacing">
                                            <table width="75%" align="center" datatable="" class="table table-striped table-bordered table-hover dataTables-example">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Email</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="member in vm.Group.MailContacts">
                                                        <td><a href="contacts/edit/{{member.ContactId}}"> {{member.ContactName}}</a></td>
                                                        <td>{{member.Email}}</td>
                                                        <td width="9%" align="center">
                                                            <div ibox-tools settings="vm.gridmemberIconSetting"
                                                                 deleteclick="vm.removeClick(member.ContactId);"></div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="form-group control-spacing text-center">
                                        <div ng-hide="true" id="oldgrpId" ng-model="vm.Contact.GroupId"></div>
                                        <div ng-hide="true" id="ContactId" ng-model="vm.Contact.ContactId"></div>
                                        <button ng-disabled="vm.isView" class="btn btn-rounded btn-primary" ng-click='vm.listClick()'>Cancel</button>
                                        <button ng-disabled="vm.isView" ng-hide="!vm.isUpdate" ng-show="vm.isUpdate" class="btn btn-rounded btn-primary" ng-click='vm.update(myForm)'>Update</button>
                                        <button ng-disabled="vm.isView" ng-hide="vm.isUpdate" ng-show="!vm.isUpdate" class="btn btn-rounded btn-primary" ng-click='vm.save(myForm)'>Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
